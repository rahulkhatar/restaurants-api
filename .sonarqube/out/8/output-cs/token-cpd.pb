∞+
ÉC:\Users\rahul\Desktop\API_Tasks\DotNetCore_8\Revision_Part_1_Github\src\Revision_Part_1.Infrastructure\Seeders\RestaurantSeeder.cs
	namespace 	
Revision_Part_1
 
. 
Infrastructure (
.( )
Seeders) 0
;0 1
public 
class 
RestaurantSeeder 
(  
RestaurentsDbContext 2
	dbContext3 <
)< =
:> ?
IRestaurantSeeder@ Q
{		 
public

 

async

 
Task

 
Seed

 
(

 
)

 
{ 
if 

( 
	dbContext 
. 
Database 
.  
GetPendingMigrations 3
(3 4
)4 5
.5 6
Any6 9
(9 :
): ;
); <
{ 	
await 
	dbContext 
. 
Database $
.$ %
MigrateAsync% 1
(1 2
)2 3
;3 4
} 	
if 

( 
await 
	dbContext 
. 
Database $
.$ %
CanConnectAsync% 4
(4 5
)5 6
)6 7
{ 	
if 
( 
! 
await 
	dbContext  
.  !
Restaurants! ,
., -
AnyAsync- 5
(5 6
)6 7
)7 8
{ 
var 
restaurants 
=  !
GetRestaurants" 0
(0 1
)1 2
;2 3
	dbContext 
. 
Restaurants %
.% &
AddRange& .
(. /
restaurants/ :
): ;
;; <
await 
	dbContext 
.  
SaveChangesAsync  0
(0 1
)1 2
;2 3
} 
if 
( 
! 
	dbContext 
. 
Roles  
.  !
Any! $
($ %
)% &
)& '
{ 
var 
roles 
= 
GetRoles $
($ %
)% &
;& '
	dbContext 
. 
Roles 
.  
AddRange  (
(( )
roles) .
). /
;/ 0
await 
	dbContext 
.  
SaveChangesAsync  0
(0 1
)1 2
;2 3
} 
} 	
}   
private"" 
IEnumerable"" 
<"" 

Restaurant"" "
>""" #
GetRestaurants""$ 2
(""2 3
)""3 4
{## 
User$$ 
owner$$ 
=$$ 
new$$ 
User$$ 
($$ 
)$$ 
{%% 	
Email&& 
=&& 
$str&& (
}'' 	
;''	 

List(( 
<(( 

Restaurant(( 
>(( 
restaurants(( $
=((% &
[((' (
new)) 

Restaurant)) 
()) 
))) 
{)) 
Owner** 
=** 
owner** 
,** 
Name++ 
=++ 
$str++ 
,++ 
Category,, 
=,, 
$str,, &
,,,& '
Description-- 
=-- 
$str-- =
,--= >
ContactEmail.. 
=.. 
$str.. 6
,..6 7
HasDelivery// 
=// 
true// "
,//" #
Dishes00 
=00 
[11 
new22 
(22 
)22 
{22 
Name33 
=33 
$str33 3
,333 4
Description44 !
=44" #
$str44$ J
,44J K
Price55 
=55 
$num55 $
,55$ %
}66 
,66 
]77 
,77 
Address88 
=88 
new88 
(88 
)88 
{99 
City:: 
=:: 
$str:: %
,::% &
Street;; 
=;; 
$str;; *
,;;* +

PostalCode<< 
=<<  
$str<<! (
,<<( )
}== 
}>> 
]?? 	
;??	 

returnAA 
restaurantsAA 
;AA 
}BB 
privateDD 
IEnumerableDD 
<DD 
IdentityRoleDD $
>DD$ %
GetRolesDD& .
(DD. /
)DD/ 0
{EE 
ListFF 
<FF 
IdentityRoleFF 
>FF 
rolesFF  
=FF! "
[FF# $
newGG 
IdentityRoleGG 
(GG 
)GG 
{HH 
NameII 
=II 
$strII 
,II 
NormalizedNameJJ 
=JJ  
$strJJ! '
}KK 
,KK 
newLL 
IdentityRoleLL 
(LL 
)LL 
{MM 
NameNN 
=NN 
$strNN 
,NN 
NormalizedNameOO 
=OO  
$strOO! (
}PP 
,PP 
newQQ 
IdentityRoleQQ 
(QQ 
)QQ 
{RR 
NameSS 
=SS 
$strSS 
,SS 
NormalizedNameTT 
=TT  
$strTT! (
}UU 
]VV 	
;VV	 

returnXX 
rolesXX 
;XX 
}YY 
}ZZ €
ÑC:\Users\rahul\Desktop\API_Tasks\DotNetCore_8\Revision_Part_1_Github\src\Revision_Part_1.Infrastructure\Seeders\IRestaurantSeeder.cs
	namespace 	
Revision_Part_1
 
. 
Infrastructure (
.( )
Seeders) 0
{ 
public 

	interface 
IRestaurantSeeder &
{ 
Task 
Seed 
( 
) 
; 
} 
} Ÿ
ìC:\Users\rahul\Desktop\API_Tasks\DotNetCore_8\Revision_Part_1_Github\src\Revision_Part_1.Infrastructure\Repositories\RestaurantServiceRepository.cs
	namespace 	
Revision_Part_1
 
. 
Infrastructure (
.( )
Repositories) 5
;5 6
public 
class '
RestaurantServiceRepository (
(( ) 
RestaurentsDbContext) =
	dbContext> G
)G H
:I J
IRestaurantServiceK ]
{		 
public

 

async

 
Task

 
<

 
IEnumerable

 !
<

! "

Restaurant

" ,
>

, -
>

- .
GetAllAsync

/ :
(

: ;
)

; <
{ 
var 
restaurants 
= 
await 
	dbContext  )
.) *
Restaurants* 5
.5 6
ToListAsync6 A
(A B
)B C
;C D
return 
restaurants 
; 
} 
public 

async 
Task 
< 

Restaurant  
?  !
>! ""
GetRestaurantByIdAsync# 9
(9 :
int: =
id> @
)@ A
{ 
var 

restaurant 
= 
await 
	dbContext (
.( )
Restaurants) 4
.4 5
Include5 <
(< =
x= >
=>? A
xB C
.C D
DishesD J
)J K
.K L
FirstOrDefaultAsyncL _
(_ `
x` a
=>b d
xe f
.f g
Idg i
==j l
idm o
)o p
;p q
return 

restaurant 
; 
} 
public 

async 
Task 
< 
int 
> 
CreateRestaurant +
(+ ,

Restaurant, 6

restaurant7 A
)A B
{ 
	dbContext 
. 
Restaurants 
. 
Add !
(! "

restaurant" ,
), -
;- .
await 
	dbContext 
. 
SaveChangesAsync (
(( )
)) *
;* +
return 

restaurant 
. 
Id 
; 
} 
public 

async 
Task 
< 
bool 
> 
DeleteRestaurant ,
(, -
int- 0
id1 3
)3 4
{ 
var 

restaurant 
= 
await 
	dbContext (
.( )
Restaurants) 4
.4 5
FirstOrDefaultAsync5 H
(H I
xI J
=>K M
xN O
.O P
IdP R
==S U
idV X
)X Y
;Y Z
if 

( 

restaurant 
is 
null 
) 
return   
false   
;   
	dbContext"" 
."" 
Restaurants"" 
."" 
Remove"" $
(""$ %

restaurant""% /
)""/ 0
;""0 1
await## 
	dbContext## 
.## 
SaveChangesAsync## (
(##( )
)##) *
;##* +
return$$ 
true$$ 
;$$ 
}%% 
public'' 

Task'' 
SaveChanges'' 
('' 
)'' 
=>(( 
	dbContext(( 
.(( 
SaveChangesAsync(( "
(((" #
)((# $
;(($ %
})) …
ñC:\Users\rahul\Desktop\API_Tasks\DotNetCore_8\Revision_Part_1_Github\src\Revision_Part_1.Infrastructure\Repositories\RestaurantAuthorizationService.cs
	namespace 	
Revision_Part_1
 
. 
Infrastructure (
.( )
Repositories) 5
;5 6
public 
class *
RestaurantAuthorizationService +
(+ ,
ILogger, 3
<3 4*
RestaurantAuthorizationService4 R
>R S
loggerT Z
,Z [
IUserContext		 
userContext		 
)		 
:		 +
IRestaurantAuthorizationService		  ?
{

 
public 

bool 
	Authorize 
( 

Restaurant $

restaurant% /
,/ 0
ResourceOperation1 B
resourceOperationC T
)T U
{ 
var 
user 
= 
userContext 
. 

GetCurrent )
() *
)* +
;+ ,
logger 
. 
LogInformation 
( 
$str l
,l m
user 
? 
. 
Email 
, 
resourceOperation 
, 

restaurant 
. 
Name 
) 
; 
if 

( 
resourceOperation 
==  
ResourceOperation! 2
.2 3
Read3 7
||8 :
resourceOperation; L
==M O
ResourceOperationP a
.a b
Createb h
)h i
{ 	
logger 
. 
LogInformation !
(! "
$str" T
)T U
;U V
return 
true 
; 
} 	
if 

( 
resourceOperation 
==  
ResourceOperation! 2
.2 3
Delete3 9
&&: <
user= A
!A B
.B C
IsInRoleC K
(K L
$strL S
)S T
)T U
{ 	
logger 
. 
LogInformation !
(! "
$str" [
)[ \
;\ ]
return 
true 
; 
} 	
if   

(   
(   
resourceOperation   
==   !
ResourceOperation  " 3
.  3 4
Delete  4 :
||  ; =
resourceOperation  > O
==  P R
ResourceOperation  S d
.  d e
Update  e k
)  k l
&&!! 
user!! 
?!! 
.!! 
Id!! 
==!! 

restaurant!! %
.!!% &
OwnerId!!& -
)!!- .
{"" 	
logger## 
.## 
LogInformation## !
(##! "
$str##" O
)##O P
;##P Q
return$$ 
true$$ 
;$$ 
}%% 	
return'' 
false'' 
;'' 
}(( 
})) ˛
çC:\Users\rahul\Desktop\API_Tasks\DotNetCore_8\Revision_Part_1_Github\src\Revision_Part_1.Infrastructure\Repositories\DishServiceRepository.cs
	namespace 	
Revision_Part_1
 
. 
Infrastructure (
.( )
Repositories) 5
{ 
internal 
class !
DishServiceRepository (
(( ) 
RestaurentsDbContext) =
	dbContext> G
)G H
:I J
IDishServiceK W
{ 
public 
async 
Task 
< 
int 
> 
Create %
(% &
Dish& *
entity+ 1
)1 2
{ 	
	dbContext 
. 
Dishes 
. 
Add  
(  !
entity! '
)' (
;( )
await 
	dbContext 
. 
SaveChangesAsync ,
(, -
)- .
;. /
return 
entity 
. 
Id 
; 
} 	
public 
async 
Task 
Delete  
(  !
IEnumerable! ,
<, -
Dish- 1
>1 2
entities3 ;
); <
{ 	
	dbContext 
. 
Dishes 
. 
RemoveRange (
(( )
entities) 1
)1 2
;2 3
await 
	dbContext 
. 
SaveChangesAsync ,
(, -
)- .
;. /
} 	
} 
} ø)
äC:\Users\rahul\Desktop\API_Tasks\DotNetCore_8\Revision_Part_1_Github\src\Revision_Part_1.Infrastructure\Repositories\BlobStorageService.cs
	namespace 	
Revision_Part_1
 
. 
Infrastructure (
.( )
Repositories) 5
;5 6
public		 
class		 
BlobStorageService		 
(		  
IOptions		  (
<		( )
BlobStorageSettings		) <
>		< =&
_blobStorageSettingsOption		> X
)		X Y
:		Z [
IBlobStorageService		\ o
{

 
private 
readonly 
BlobStorageSettings ( 
_blobStorageSettings) =
=> ?&
_blobStorageSettingsOption@ Z
.Z [
Value[ `
;` a
public 

async 
Task 
< 
string 
> 
UploadToBlobAsync /
(/ 0
Stream0 6
data7 ;
,; <
string= C
fileNameD L
)L M
{ 
var 
blobServiceClient 
= 
new  #
BlobServiceClient$ 5
(5 6 
_blobStorageSettings6 J
.J K
ConnectionStringsK \
)\ ]
;] ^
var 
containerClient 
= 
blobServiceClient /
./ 0"
GetBlobContainerClient0 F
(F G 
_blobStorageSettingsG [
.[ \
ContainerName\ i
)i j
;j k
var 

blobClient 
= 
containerClient (
.( )
GetBlobClient) 6
(6 7
fileName7 ?
)? @
;@ A
await 

blobClient 
. 
UploadAsync $
($ %
data% )
)) *
;* +
var 
blobUrl 
= 

blobClient  
.  !
Uri! $
.$ %
ToString% -
(- .
). /
;/ 0
return 
blobUrl 
; 
} 
public 

string 
GetBlobSasUrl 
(  
string  &
?& '
blobUrl( /
)/ 0
{ 
var 
blobUri 
= 
new 
Uri 
( 
blobUrl %
!% &
)& '
;' (
var 
blobName 
= 
Uri 
. 
UnescapeDataString -
(- .
blobUri. 5
.5 6
Segments6 >
.> ?
Last? C
(C D
)D E
)E F
;F G
var!! 

sasBuilder!! 
=!! 
new!! 
BlobSasBuilder!! +
(!!+ ,
)!!, -
{"" 	
Version## 
=## 
$str## "
,##" #
BlobContainerName$$ 
=$$  
_blobStorageSettings$$  4
.$$4 5
ContainerName$$5 B
,$$B C
Resource%% 
=%% 
$str%% 
,%% 
StartsOn&& 
=&& 
DateTimeOffset&& %
.&&% &
UtcNow&&& ,
,&&, -
	ExpiresOn'' 
='' 
DateTimeOffset'' &
.''& '
UtcNow''' -
.''- .
AddDays''. 5
(''5 6
$num''6 7
)''7 8
,''8 9
BlobName)) 
=)) 
blobName)) 
,))  
}++ 	
;++	 


sasBuilder-- 
.-- 
SetPermissions-- !
(--! "
BlobSasPermissions--" 4
.--4 5
Read--5 9
)--9 :
;--: ;
var// 
blobServiceClient// 
=// 
new//  #
BlobServiceClient//$ 5
(//5 6 
_blobStorageSettings//6 J
.//J K
ConnectionStrings//K \
)//\ ]
;//] ^
var11 
sasToken11 
=11 

sasBuilder11 !
.11! " 
ToSasQueryParameters11" 6
(116 7
new117 :
Azure11; @
.11@ A
Storage11A H
.11H I&
StorageSharedKeyCredential11I c
(11c d
blobServiceClient11d u
.11u v
AccountName	11v Å
,
11Å Ç"
_blobStorageSettings
11É ó
.
11ó ò

AccountKey
11ò ¢
)
11¢ £
)
11£ §
.
11§ •
ToString
11• ≠
(
11≠ Æ
)
11Æ Ø
;
11Ø ∞
return33 
$"33 
{33 
blobUrl33 
}33 
$str33 
{33 
sasToken33 $
}33$ %
"33% &
;33& '
}44 
private66 
string66 
GetBlobNameFromUrl66 %
(66% &
string66& ,
blobUrl66- 4
)664 5
{77 
var88 
url88 
=88 
new88 
Uri88 
(88 
blobUrl88 !
)88! "
;88" #
return99 
url99 
.99 
Segments99 
.99 
Last99  
(99  !
)99! "
;99" #
}:: 
};; Ò#
ãC:\Users\rahul\Desktop\API_Tasks\DotNetCore_8\Revision_Part_1_Github\src\Revision_Part_1.Infrastructure\Persistence\RestaurentsDbContext.cs
	namespace 	
Revision_Part_1
 
. 
Infrastructure (
.( )
Persistence) 4
;4 5
public"" 
class""  
RestaurentsDbContext"" !
(""! "
DbContextOptions""" 2
<""2 3 
RestaurentsDbContext""3 G
>""G H
options""I P
)""P Q
:""R S
IdentityDbContext""T e
<""e f
User""f j
>""j k
(""k l
options""l s
)""s t
{## 
public$$ 

DbSet$$ 
<$$ 

Restaurant$$ 
>$$ 
Restaurants$$ (
=>$$) +
Set$$, /
<$$/ 0

Restaurant$$0 :
>$$: ;
($$; <
)$$< =
;$$= >
public%% 

DbSet%% 
<%% 
Dish%% 
>%% 
Dishes%% 
=>%%  
Set%%! $
<%%$ %
Dish%%% )
>%%) *
(%%* +
)%%+ ,
;%%, -
	protected'' 
override'' 
void'' 
OnModelCreating'' +
(''+ ,
ModelBuilder'', 8
modelBuilder''9 E
)''E F
{(( 
base)) 
.)) 
OnModelCreating)) 
()) 
modelBuilder)) )
)))) *
;))* +
modelBuilder++ 
.++ 
Entity++ 
<++ 

Restaurant++ &
>++& '
(++' (
)++( )
.,, 	
OwnsOne,,	 
(,, 
r,, 
=>,, 
r,, 
.,, 
Address,, 
,,,  
a,,! "
=>,,# %
{-- 	
a.. 
... 
Property.. 
(.. 
p.. 
=>.. 
p.. 
... 
City.. "
).." #
...# $

IsRequired..$ .
(... /
false../ 4
)..4 5
;..5 6
a// 
.// 
Property// 
(// 
p// 
=>// 
p// 
.// 
Street// $
)//$ %
.//% &

IsRequired//& 0
(//0 1
false//1 6
)//6 7
;//7 8
a00 
.00 
Property00 
(00 
p00 
=>00 
p00 
.00 

PostalCode00 (
)00( )
.00) *

IsRequired00* 4
(004 5
false005 :
)00: ;
;00; <
a33 
.33 
Property33 
<33 
string33 
>33 
(33 
$str33 .
)33. /
.44 
HasColumnName44 
(44 
$str44 .
)44. /
.55 
HasDefaultValue55  
(55  !
$str55! $
)55$ %
;55% &
}66 	
)66	 

;66
 
modelBuilder77 
.77 
Entity77 
<77 

Restaurant77 &
>77& '
(77' (
)77( )
.77) *
HasMany77* 1
(771 2
r772 3
=>774 6
r777 8
.778 9
Dishes779 ?
)77? @
.77@ A
WithOne77A H
(77H I
)77I J
.77J K
HasForeignKey77K X
(77X Y
r77Y Z
=>77[ ]
r77^ _
.77_ `
RestaurantId77` l
)77l m
;77m n
modelBuilder88 
.88 
Entity88 
<88 
Dish88  
>88  !
(88! "
)88" #
.88# $
Property88$ ,
(88, -
d88- .
=>88/ 1
d882 3
.883 4
Price884 9
)889 :
.88: ;
HasPrecision88; G
(88G H
$num88H J
,88J K
$num88L M
)88M N
;88N O
modelBuilder;; 
.;; 
Entity;; 
<;; 
User;;  
>;;  !
(;;! "
);;" #
.;;# $
HasMany;;$ +
(;;+ ,
o;;, -
=>;;. 0
o;;1 2
.;;2 3
OwnedRestaurant;;3 B
);;B C
.;;C D
WithOne;;D K
(;;K L
o;;L M
=>;;N P
o;;Q R
.;;R S
Owner;;S X
);;X Y
.;;Y Z
HasForeignKey;;Z g
(;;g h
o;;h i
=>;;j l
o;;m n
.;;n o
OwnerId;;o v
);;v w
;;;w x
}<< 
}>> È
ìC:\Users\rahul\Desktop\API_Tasks\DotNetCore_8\Revision_Part_1_Github\src\Revision_Part_1.Infrastructure\Migrations\20251127065630_AddLogoUrlToDb.cs
	namespace 	
Revision_Part_1
 
. 
Infrastructure (
.( )

Migrations) 3
{ 
public 

partial 
class 
AddLogoUrlToDb '
:( )
	Migration* 3
{		 
	protected 
override 
void 
Up  "
(" #
MigrationBuilder# 3
migrationBuilder4 D
)D E
{ 	
migrationBuilder 
. 
	AddColumn &
<& '
string' -
>- .
(. /
name 
: 
$str 
,  
table 
: 
$str $
,$ %
type 
: 
$str %
,% &
nullable 
: 
true 
) 
;  
} 	
	protected 
override 
void 
Down  $
($ %
MigrationBuilder% 5
migrationBuilder6 F
)F G
{ 	
migrationBuilder 
. 

DropColumn '
(' (
name 
: 
$str 
,  
table 
: 
$str $
)$ %
;% &
} 	
} 
} Ä
õC:\Users\rahul\Desktop\API_Tasks\DotNetCore_8\Revision_Part_1_Github\src\Revision_Part_1.Infrastructure\Migrations\20251124023321_LinkedUserToRestaurant.cs
	namespace 	
Revision_Part_1
 
. 
Infrastructure (
.( )

Migrations) 3
{ 
public 

partial 
class "
LinkedUserToRestaurant /
:0 1
	Migration2 ;
{		 
	protected 
override 
void 
Up  "
(" #
MigrationBuilder# 3
migrationBuilder4 D
)D E
{ 	
migrationBuilder 
. 
	AddColumn &
<& '
string' -
>- .
(. /
name 
: 
$str 
,  
table 
: 
$str $
,$ %
type 
: 
$str %
,% &
nullable 
: 
false 
,  
defaultValue 
: 
$str  
)  !
;! "
migrationBuilder 
. 
Sql  
(  !
$str! f
)f g
;g h
migrationBuilder 
. 
CreateIndex (
(( )
name 
: 
$str .
,. /
table 
: 
$str $
,$ %
column 
: 
$str !
)! "
;" #
migrationBuilder 
. 
AddForeignKey *
(* +
name 
: 
$str :
,: ;
table 
: 
$str $
,$ %
column 
: 
$str !
,! "
principalTable 
: 
$str  -
,- .
principalColumn   
:    
$str  ! %
,  % &
onDelete!! 
:!! 
ReferentialAction!! +
.!!+ ,
Cascade!!, 3
)!!3 4
;!!4 5
}"" 	
	protected%% 
override%% 
void%% 
Down%%  $
(%%$ %
MigrationBuilder%%% 5
migrationBuilder%%6 F
)%%F G
{&& 	
migrationBuilder'' 
.'' 
DropForeignKey'' +
(''+ ,
name(( 
:(( 
$str(( :
,((: ;
table)) 
:)) 
$str)) $
)))$ %
;))% &
migrationBuilder++ 
.++ 
	DropIndex++ &
(++& '
name,, 
:,, 
$str,, .
,,,. /
table-- 
:-- 
$str-- $
)--$ %
;--% &
migrationBuilder// 
.// 

DropColumn// '
(//' (
name00 
:00 
$str00 
,00  
table11 
:11 
$str11 $
)11$ %
;11% &
}22 	
}33 
}44 ﬂ
£C:\Users\rahul\Desktop\API_Tasks\DotNetCore_8\Revision_Part_1_Github\src\Revision_Part_1.Infrastructure\Migrations\20251123055330_ModifiedIdentityPropertiesUser.cs
	namespace 	
Revision_Part_1
 
. 
Infrastructure (
.( )

Migrations) 3
{ 
public		 

partial		 
class		 *
ModifiedIdentityPropertiesUser		 7
:		8 9
	Migration		: C
{

 
	protected 
override 
void 
Up  "
(" #
MigrationBuilder# 3
migrationBuilder4 D
)D E
{ 	
migrationBuilder 
. 
	AddColumn &
<& '
DateOnly' /
>/ 0
(0 1
name 
: 
$str #
,# $
table 
: 
$str $
,$ %
type 
: 
$str 
, 
nullable 
: 
true 
) 
;  
migrationBuilder 
. 
	AddColumn &
<& '
string' -
>- .
(. /
name 
: 
$str #
,# $
table 
: 
$str $
,$ %
type 
: 
$str %
,% &
nullable 
: 
false 
,  
defaultValue 
: 
$str  
)  !
;! "
} 	
	protected 
override 
void 
Down  $
($ %
MigrationBuilder% 5
migrationBuilder6 F
)F G
{ 	
migrationBuilder 
. 

DropColumn '
(' (
name   
:   
$str   #
,  # $
table!! 
:!! 
$str!! $
)!!$ %
;!!% &
migrationBuilder## 
.## 

DropColumn## '
(##' (
name$$ 
:$$ 
$str$$ #
,$$# $
table%% 
:%% 
$str%% $
)%%$ %
;%%% &
}&& 	
}'' 
}(( À∆
óC:\Users\rahul\Desktop\API_Tasks\DotNetCore_8\Revision_Part_1_Github\src\Revision_Part_1.Infrastructure\Migrations\20251123041457_IdentityTablesToDb.cs
	namespace 	
Revision_Part_1
 
. 
Infrastructure (
.( )

Migrations) 3
{ 
public		 

partial		 
class		 
IdentityTablesToDb		 +
:		, -
	Migration		. 7
{

 
	protected 
override 
void 
Up  "
(" #
MigrationBuilder# 3
migrationBuilder4 D
)D E
{ 	
migrationBuilder 
. 
CreateTable (
(( )
name 
: 
$str #
,# $
columns 
: 
table 
=> !
new" %
{ 
Id 
= 
table 
. 
Column %
<% &
string& ,
>, -
(- .
type. 2
:2 3
$str4 C
,C D
nullableE M
:M N
falseO T
)T U
,U V
Name 
= 
table  
.  !
Column! '
<' (
string( .
>. /
(/ 0
type0 4
:4 5
$str6 E
,E F
	maxLengthG P
:P Q
$numR U
,U V
nullableW _
:_ `
truea e
)e f
,f g
NormalizedName "
=# $
table% *
.* +
Column+ 1
<1 2
string2 8
>8 9
(9 :
type: >
:> ?
$str@ O
,O P
	maxLengthQ Z
:Z [
$num\ _
,_ `
nullablea i
:i j
truek o
)o p
,p q
ConcurrencyStamp $
=% &
table' ,
., -
Column- 3
<3 4
string4 :
>: ;
(; <
type< @
:@ A
$strB Q
,Q R
nullableS [
:[ \
true] a
)a b
} 
, 
constraints 
: 
table "
=># %
{ 
table 
. 

PrimaryKey $
($ %
$str% 5
,5 6
x7 8
=>9 ;
x< =
.= >
Id> @
)@ A
;A B
} 
) 
; 
migrationBuilder 
. 
CreateTable (
(( )
name 
: 
$str #
,# $
columns 
: 
table 
=> !
new" %
{ 
Id   
=   
table   
.   
Column   %
<  % &
string  & ,
>  , -
(  - .
type  . 2
:  2 3
$str  4 C
,  C D
nullable  E M
:  M N
false  O T
)  T U
,  U V
UserName!! 
=!! 
table!! $
.!!$ %
Column!!% +
<!!+ ,
string!!, 2
>!!2 3
(!!3 4
type!!4 8
:!!8 9
$str!!: I
,!!I J
	maxLength!!K T
:!!T U
$num!!V Y
,!!Y Z
nullable!![ c
:!!c d
true!!e i
)!!i j
,!!j k
NormalizedUserName"" &
=""' (
table"") .
."". /
Column""/ 5
<""5 6
string""6 <
>""< =
(""= >
type""> B
:""B C
$str""D S
,""S T
	maxLength""U ^
:""^ _
$num""` c
,""c d
nullable""e m
:""m n
true""o s
)""s t
,""t u
Email## 
=## 
table## !
.##! "
Column##" (
<##( )
string##) /
>##/ 0
(##0 1
type##1 5
:##5 6
$str##7 F
,##F G
	maxLength##H Q
:##Q R
$num##S V
,##V W
nullable##X `
:##` a
true##b f
)##f g
,##g h
NormalizedEmail$$ #
=$$$ %
table$$& +
.$$+ ,
Column$$, 2
<$$2 3
string$$3 9
>$$9 :
($$: ;
type$$; ?
:$$? @
$str$$A P
,$$P Q
	maxLength$$R [
:$$[ \
$num$$] `
,$$` a
nullable$$b j
:$$j k
true$$l p
)$$p q
,$$q r
EmailConfirmed%% "
=%%# $
table%%% *
.%%* +
Column%%+ 1
<%%1 2
bool%%2 6
>%%6 7
(%%7 8
type%%8 <
:%%< =
$str%%> C
,%%C D
nullable%%E M
:%%M N
false%%O T
)%%T U
,%%U V
PasswordHash&&  
=&&! "
table&&# (
.&&( )
Column&&) /
<&&/ 0
string&&0 6
>&&6 7
(&&7 8
type&&8 <
:&&< =
$str&&> M
,&&M N
nullable&&O W
:&&W X
true&&Y ]
)&&] ^
,&&^ _
SecurityStamp'' !
=''" #
table''$ )
.'') *
Column''* 0
<''0 1
string''1 7
>''7 8
(''8 9
type''9 =
:''= >
$str''? N
,''N O
nullable''P X
:''X Y
true''Z ^
)''^ _
,''_ `
ConcurrencyStamp(( $
=((% &
table((' ,
.((, -
Column((- 3
<((3 4
string((4 :
>((: ;
(((; <
type((< @
:((@ A
$str((B Q
,((Q R
nullable((S [
:(([ \
true((] a
)((a b
,((b c
PhoneNumber)) 
=))  !
table))" '
.))' (
Column))( .
<)). /
string))/ 5
>))5 6
())6 7
type))7 ;
:)); <
$str))= L
,))L M
nullable))N V
:))V W
true))X \
)))\ ]
,))] ^ 
PhoneNumberConfirmed** (
=**) *
table**+ 0
.**0 1
Column**1 7
<**7 8
bool**8 <
>**< =
(**= >
type**> B
:**B C
$str**D I
,**I J
nullable**K S
:**S T
false**U Z
)**Z [
,**[ \
TwoFactorEnabled++ $
=++% &
table++' ,
.++, -
Column++- 3
<++3 4
bool++4 8
>++8 9
(++9 :
type++: >
:++> ?
$str++@ E
,++E F
nullable++G O
:++O P
false++Q V
)++V W
,++W X

LockoutEnd,, 
=,,  
table,,! &
.,,& '
Column,,' -
<,,- .
DateTimeOffset,,. <
>,,< =
(,,= >
type,,> B
:,,B C
$str,,D T
,,,T U
nullable,,V ^
:,,^ _
true,,` d
),,d e
,,,e f
LockoutEnabled-- "
=--# $
table--% *
.--* +
Column--+ 1
<--1 2
bool--2 6
>--6 7
(--7 8
type--8 <
:--< =
$str--> C
,--C D
nullable--E M
:--M N
false--O T
)--T U
,--U V
AccessFailedCount.. %
=..& '
table..( -
...- .
Column... 4
<..4 5
int..5 8
>..8 9
(..9 :
type..: >
:..> ?
$str..@ E
,..E F
nullable..G O
:..O P
false..Q V
)..V W
}// 
,// 
constraints00 
:00 
table00 "
=>00# %
{11 
table22 
.22 

PrimaryKey22 $
(22$ %
$str22% 5
,225 6
x227 8
=>229 ;
x22< =
.22= >
Id22> @
)22@ A
;22A B
}33 
)33 
;33 
migrationBuilder55 
.55 
CreateTable55 (
(55( )
name66 
:66 
$str66 (
,66( )
columns77 
:77 
table77 
=>77 !
new77" %
{88 
Id99 
=99 
table99 
.99 
Column99 %
<99% &
int99& )
>99) *
(99* +
type99+ /
:99/ 0
$str991 6
,996 7
nullable998 @
:99@ A
false99B G
)99G H
.:: 

Annotation:: #
(::# $
$str::$ 8
,::8 9
$str::: @
)::@ A
,::A B
RoleId;; 
=;; 
table;; "
.;;" #
Column;;# )
<;;) *
string;;* 0
>;;0 1
(;;1 2
type;;2 6
:;;6 7
$str;;8 G
,;;G H
nullable;;I Q
:;;Q R
false;;S X
);;X Y
,;;Y Z
	ClaimType<< 
=<< 
table<<  %
.<<% &
Column<<& ,
<<<, -
string<<- 3
><<3 4
(<<4 5
type<<5 9
:<<9 :
$str<<; J
,<<J K
nullable<<L T
:<<T U
true<<V Z
)<<Z [
,<<[ \

ClaimValue== 
===  
table==! &
.==& '
Column==' -
<==- .
string==. 4
>==4 5
(==5 6
type==6 :
:==: ;
$str==< K
,==K L
nullable==M U
:==U V
true==W [
)==[ \
}>> 
,>> 
constraints?? 
:?? 
table?? "
=>??# %
{@@ 
tableAA 
.AA 

PrimaryKeyAA $
(AA$ %
$strAA% :
,AA: ;
xAA< =
=>AA> @
xAAA B
.AAB C
IdAAC E
)AAE F
;AAF G
tableBB 
.BB 

ForeignKeyBB $
(BB$ %
nameCC 
:CC 
$strCC F
,CCF G
columnDD 
:DD 
xDD  !
=>DD" $
xDD% &
.DD& '
RoleIdDD' -
,DD- .
principalTableEE &
:EE& '
$strEE( 5
,EE5 6
principalColumnFF '
:FF' (
$strFF) -
,FF- .
onDeleteGG  
:GG  !
ReferentialActionGG" 3
.GG3 4
CascadeGG4 ;
)GG; <
;GG< =
}HH 
)HH 
;HH 
migrationBuilderJJ 
.JJ 
CreateTableJJ (
(JJ( )
nameKK 
:KK 
$strKK (
,KK( )
columnsLL 
:LL 
tableLL 
=>LL !
newLL" %
{MM 
IdNN 
=NN 
tableNN 
.NN 
ColumnNN %
<NN% &
intNN& )
>NN) *
(NN* +
typeNN+ /
:NN/ 0
$strNN1 6
,NN6 7
nullableNN8 @
:NN@ A
falseNNB G
)NNG H
.OO 

AnnotationOO #
(OO# $
$strOO$ 8
,OO8 9
$strOO: @
)OO@ A
,OOA B
UserIdPP 
=PP 
tablePP "
.PP" #
ColumnPP# )
<PP) *
stringPP* 0
>PP0 1
(PP1 2
typePP2 6
:PP6 7
$strPP8 G
,PPG H
nullablePPI Q
:PPQ R
falsePPS X
)PPX Y
,PPY Z
	ClaimTypeQQ 
=QQ 
tableQQ  %
.QQ% &
ColumnQQ& ,
<QQ, -
stringQQ- 3
>QQ3 4
(QQ4 5
typeQQ5 9
:QQ9 :
$strQQ; J
,QQJ K
nullableQQL T
:QQT U
trueQQV Z
)QQZ [
,QQ[ \

ClaimValueRR 
=RR  
tableRR! &
.RR& '
ColumnRR' -
<RR- .
stringRR. 4
>RR4 5
(RR5 6
typeRR6 :
:RR: ;
$strRR< K
,RRK L
nullableRRM U
:RRU V
trueRRW [
)RR[ \
}SS 
,SS 
constraintsTT 
:TT 
tableTT "
=>TT# %
{UU 
tableVV 
.VV 

PrimaryKeyVV $
(VV$ %
$strVV% :
,VV: ;
xVV< =
=>VV> @
xVVA B
.VVB C
IdVVC E
)VVE F
;VVF G
tableWW 
.WW 

ForeignKeyWW $
(WW$ %
nameXX 
:XX 
$strXX F
,XXF G
columnYY 
:YY 
xYY  !
=>YY" $
xYY% &
.YY& '
UserIdYY' -
,YY- .
principalTableZZ &
:ZZ& '
$strZZ( 5
,ZZ5 6
principalColumn[[ '
:[[' (
$str[[) -
,[[- .
onDelete\\  
:\\  !
ReferentialAction\\" 3
.\\3 4
Cascade\\4 ;
)\\; <
;\\< =
}]] 
)]] 
;]] 
migrationBuilder__ 
.__ 
CreateTable__ (
(__( )
name`` 
:`` 
$str`` (
,``( )
columnsaa 
:aa 
tableaa 
=>aa !
newaa" %
{bb 
LoginProvidercc !
=cc" #
tablecc$ )
.cc) *
Columncc* 0
<cc0 1
stringcc1 7
>cc7 8
(cc8 9
typecc9 =
:cc= >
$strcc? N
,ccN O
nullableccP X
:ccX Y
falseccZ _
)cc_ `
,cc` a
ProviderKeydd 
=dd  !
tabledd" '
.dd' (
Columndd( .
<dd. /
stringdd/ 5
>dd5 6
(dd6 7
typedd7 ;
:dd; <
$strdd= L
,ddL M
nullableddN V
:ddV W
falseddX ]
)dd] ^
,dd^ _
ProviderDisplayNameee '
=ee( )
tableee* /
.ee/ 0
Columnee0 6
<ee6 7
stringee7 =
>ee= >
(ee> ?
typeee? C
:eeC D
$streeE T
,eeT U
nullableeeV ^
:ee^ _
trueee` d
)eed e
,eee f
UserIdff 
=ff 
tableff "
.ff" #
Columnff# )
<ff) *
stringff* 0
>ff0 1
(ff1 2
typeff2 6
:ff6 7
$strff8 G
,ffG H
nullableffI Q
:ffQ R
falseffS X
)ffX Y
}gg 
,gg 
constraintshh 
:hh 
tablehh "
=>hh# %
{ii 
tablejj 
.jj 

PrimaryKeyjj $
(jj$ %
$strjj% :
,jj: ;
xjj< =
=>jj> @
newjjA D
{jjE F
xjjG H
.jjH I
LoginProviderjjI V
,jjV W
xjjX Y
.jjY Z
ProviderKeyjjZ e
}jjf g
)jjg h
;jjh i
tablekk 
.kk 

ForeignKeykk $
(kk$ %
namell 
:ll 
$strll F
,llF G
columnmm 
:mm 
xmm  !
=>mm" $
xmm% &
.mm& '
UserIdmm' -
,mm- .
principalTablenn &
:nn& '
$strnn( 5
,nn5 6
principalColumnoo '
:oo' (
$stroo) -
,oo- .
onDeletepp  
:pp  !
ReferentialActionpp" 3
.pp3 4
Cascadepp4 ;
)pp; <
;pp< =
}qq 
)qq 
;qq 
migrationBuilderss 
.ss 
CreateTabless (
(ss( )
namett 
:tt 
$strtt '
,tt' (
columnsuu 
:uu 
tableuu 
=>uu !
newuu" %
{vv 
UserIdww 
=ww 
tableww "
.ww" #
Columnww# )
<ww) *
stringww* 0
>ww0 1
(ww1 2
typeww2 6
:ww6 7
$strww8 G
,wwG H
nullablewwI Q
:wwQ R
falsewwS X
)wwX Y
,wwY Z
RoleIdxx 
=xx 
tablexx "
.xx" #
Columnxx# )
<xx) *
stringxx* 0
>xx0 1
(xx1 2
typexx2 6
:xx6 7
$strxx8 G
,xxG H
nullablexxI Q
:xxQ R
falsexxS X
)xxX Y
}yy 
,yy 
constraintszz 
:zz 
tablezz "
=>zz# %
{{{ 
table|| 
.|| 

PrimaryKey|| $
(||$ %
$str||% 9
,||9 :
x||; <
=>||= ?
new||@ C
{||D E
x||F G
.||G H
UserId||H N
,||N O
x||P Q
.||Q R
RoleId||R X
}||Y Z
)||Z [
;||[ \
table}} 
.}} 

ForeignKey}} $
(}}$ %
name~~ 
:~~ 
$str~~ E
,~~E F
column 
: 
x  !
=>" $
x% &
.& '
RoleId' -
,- .
principalTable
ÄÄ &
:
ÄÄ& '
$str
ÄÄ( 5
,
ÄÄ5 6
principalColumn
ÅÅ '
:
ÅÅ' (
$str
ÅÅ) -
,
ÅÅ- .
onDelete
ÇÇ  
:
ÇÇ  !
ReferentialAction
ÇÇ" 3
.
ÇÇ3 4
Cascade
ÇÇ4 ;
)
ÇÇ; <
;
ÇÇ< =
table
ÉÉ 
.
ÉÉ 

ForeignKey
ÉÉ $
(
ÉÉ$ %
name
ÑÑ 
:
ÑÑ 
$str
ÑÑ E
,
ÑÑE F
column
ÖÖ 
:
ÖÖ 
x
ÖÖ  !
=>
ÖÖ" $
x
ÖÖ% &
.
ÖÖ& '
UserId
ÖÖ' -
,
ÖÖ- .
principalTable
ÜÜ &
:
ÜÜ& '
$str
ÜÜ( 5
,
ÜÜ5 6
principalColumn
áá '
:
áá' (
$str
áá) -
,
áá- .
onDelete
àà  
:
àà  !
ReferentialAction
àà" 3
.
àà3 4
Cascade
àà4 ;
)
àà; <
;
àà< =
}
ââ 
)
ââ 
;
ââ 
migrationBuilder
ãã 
.
ãã 
CreateTable
ãã (
(
ãã( )
name
åå 
:
åå 
$str
åå (
,
åå( )
columns
çç 
:
çç 
table
çç 
=>
çç !
new
çç" %
{
éé 
UserId
èè 
=
èè 
table
èè "
.
èè" #
Column
èè# )
<
èè) *
string
èè* 0
>
èè0 1
(
èè1 2
type
èè2 6
:
èè6 7
$str
èè8 G
,
èèG H
nullable
èèI Q
:
èèQ R
false
èèS X
)
èèX Y
,
èèY Z
LoginProvider
êê !
=
êê" #
table
êê$ )
.
êê) *
Column
êê* 0
<
êê0 1
string
êê1 7
>
êê7 8
(
êê8 9
type
êê9 =
:
êê= >
$str
êê? N
,
êêN O
nullable
êêP X
:
êêX Y
false
êêZ _
)
êê_ `
,
êê` a
Name
ëë 
=
ëë 
table
ëë  
.
ëë  !
Column
ëë! '
<
ëë' (
string
ëë( .
>
ëë. /
(
ëë/ 0
type
ëë0 4
:
ëë4 5
$str
ëë6 E
,
ëëE F
nullable
ëëG O
:
ëëO P
false
ëëQ V
)
ëëV W
,
ëëW X
Value
íí 
=
íí 
table
íí !
.
íí! "
Column
íí" (
<
íí( )
string
íí) /
>
íí/ 0
(
íí0 1
type
íí1 5
:
íí5 6
$str
íí7 F
,
ííF G
nullable
ííH P
:
ííP Q
true
ííR V
)
ííV W
}
ìì 
,
ìì 
constraints
îî 
:
îî 
table
îî "
=>
îî# %
{
ïï 
table
ññ 
.
ññ 

PrimaryKey
ññ $
(
ññ$ %
$str
ññ% :
,
ññ: ;
x
ññ< =
=>
ññ> @
new
ññA D
{
ññE F
x
ññG H
.
ññH I
UserId
ññI O
,
ññO P
x
ññQ R
.
ññR S
LoginProvider
ññS `
,
ññ` a
x
ññb c
.
ññc d
Name
ññd h
}
ññi j
)
ññj k
;
ññk l
table
óó 
.
óó 

ForeignKey
óó $
(
óó$ %
name
òò 
:
òò 
$str
òò F
,
òòF G
column
ôô 
:
ôô 
x
ôô  !
=>
ôô" $
x
ôô% &
.
ôô& '
UserId
ôô' -
,
ôô- .
principalTable
öö &
:
öö& '
$str
öö( 5
,
öö5 6
principalColumn
õõ '
:
õõ' (
$str
õõ) -
,
õõ- .
onDelete
úú  
:
úú  !
ReferentialAction
úú" 3
.
úú3 4
Cascade
úú4 ;
)
úú; <
;
úú< =
}
ùù 
)
ùù 
;
ùù 
migrationBuilder
üü 
.
üü 
CreateIndex
üü (
(
üü( )
name
†† 
:
†† 
$str
†† 2
,
††2 3
table
°° 
:
°° 
$str
°° )
,
°°) *
column
¢¢ 
:
¢¢ 
$str
¢¢  
)
¢¢  !
;
¢¢! "
migrationBuilder
§§ 
.
§§ 
CreateIndex
§§ (
(
§§( )
name
•• 
:
•• 
$str
•• %
,
••% &
table
¶¶ 
:
¶¶ 
$str
¶¶ $
,
¶¶$ %
column
ßß 
:
ßß 
$str
ßß (
,
ßß( )
unique
®® 
:
®® 
true
®® 
,
®® 
filter
©© 
:
©© 
$str
©© 6
)
©©6 7
;
©©7 8
migrationBuilder
´´ 
.
´´ 
CreateIndex
´´ (
(
´´( )
name
¨¨ 
:
¨¨ 
$str
¨¨ 2
,
¨¨2 3
table
≠≠ 
:
≠≠ 
$str
≠≠ )
,
≠≠) *
column
ÆÆ 
:
ÆÆ 
$str
ÆÆ  
)
ÆÆ  !
;
ÆÆ! "
migrationBuilder
∞∞ 
.
∞∞ 
CreateIndex
∞∞ (
(
∞∞( )
name
±± 
:
±± 
$str
±± 2
,
±±2 3
table
≤≤ 
:
≤≤ 
$str
≤≤ )
,
≤≤) *
column
≥≥ 
:
≥≥ 
$str
≥≥  
)
≥≥  !
;
≥≥! "
migrationBuilder
µµ 
.
µµ 
CreateIndex
µµ (
(
µµ( )
name
∂∂ 
:
∂∂ 
$str
∂∂ 1
,
∂∂1 2
table
∑∑ 
:
∑∑ 
$str
∑∑ (
,
∑∑( )
column
∏∏ 
:
∏∏ 
$str
∏∏  
)
∏∏  !
;
∏∏! "
migrationBuilder
∫∫ 
.
∫∫ 
CreateIndex
∫∫ (
(
∫∫( )
name
ªª 
:
ªª 
$str
ªª "
,
ªª" #
table
ºº 
:
ºº 
$str
ºº $
,
ºº$ %
column
ΩΩ 
:
ΩΩ 
$str
ΩΩ )
)
ΩΩ) *
;
ΩΩ* +
migrationBuilder
øø 
.
øø 
CreateIndex
øø (
(
øø( )
name
¿¿ 
:
¿¿ 
$str
¿¿ %
,
¿¿% &
table
¡¡ 
:
¡¡ 
$str
¡¡ $
,
¡¡$ %
column
¬¬ 
:
¬¬ 
$str
¬¬ ,
,
¬¬, -
unique
√√ 
:
√√ 
true
√√ 
,
√√ 
filter
ƒƒ 
:
ƒƒ 
$str
ƒƒ :
)
ƒƒ: ;
;
ƒƒ; <
}
≈≈ 	
	protected
»» 
override
»» 
void
»» 
Down
»»  $
(
»»$ %
MigrationBuilder
»»% 5
migrationBuilder
»»6 F
)
»»F G
{
…… 	
migrationBuilder
   
.
   
	DropTable
   &
(
  & '
name
ÀÀ 
:
ÀÀ 
$str
ÀÀ (
)
ÀÀ( )
;
ÀÀ) *
migrationBuilder
ÕÕ 
.
ÕÕ 
	DropTable
ÕÕ &
(
ÕÕ& '
name
ŒŒ 
:
ŒŒ 
$str
ŒŒ (
)
ŒŒ( )
;
ŒŒ) *
migrationBuilder
–– 
.
–– 
	DropTable
–– &
(
––& '
name
—— 
:
—— 
$str
—— (
)
——( )
;
——) *
migrationBuilder
”” 
.
”” 
	DropTable
”” &
(
””& '
name
‘‘ 
:
‘‘ 
$str
‘‘ '
)
‘‘' (
;
‘‘( )
migrationBuilder
÷÷ 
.
÷÷ 
	DropTable
÷÷ &
(
÷÷& '
name
◊◊ 
:
◊◊ 
$str
◊◊ (
)
◊◊( )
;
◊◊) *
migrationBuilder
ŸŸ 
.
ŸŸ 
	DropTable
ŸŸ &
(
ŸŸ& '
name
⁄⁄ 
:
⁄⁄ 
$str
⁄⁄ #
)
⁄⁄# $
;
⁄⁄$ %
migrationBuilder
‹‹ 
.
‹‹ 
	DropTable
‹‹ &
(
‹‹& '
name
›› 
:
›› 
$str
›› #
)
››# $
;
››$ %
}
ﬁﬁ 	
}
ﬂﬂ 
}‡‡ Ç
°C:\Users\rahul\Desktop\API_Tasks\DotNetCore_8\Revision_Part_1_Github\src\Revision_Part_1.Infrastructure\Migrations\20251121040326_ModifyDishEntityKiloCalories.cs
	namespace 	
Revision_Part_1
 
. 
Infrastructure (
.( )

Migrations) 3
{ 
public 

partial 
class (
ModifyDishEntityKiloCalories 5
:6 7
	Migration8 A
{		 
	protected 
override 
void 
Up  "
(" #
MigrationBuilder# 3
migrationBuilder4 D
)D E
{ 	
migrationBuilder 
. 
	AddColumn &
<& '
int' *
>* +
(+ ,
name 
: 
$str $
,$ %
table 
: 
$str 
,  
type 
: 
$str 
, 
nullable 
: 
true 
) 
;  
} 	
	protected 
override 
void 
Down  $
($ %
MigrationBuilder% 5
migrationBuilder6 F
)F G
{ 	
migrationBuilder 
. 

DropColumn '
(' (
name 
: 
$str $
,$ %
table 
: 
$str 
)  
;  !
} 	
} 
} •
òC:\Users\rahul\Desktop\API_Tasks\DotNetCore_8\Revision_Part_1_Github\src\Revision_Part_1.Infrastructure\Migrations\20251120134504_AddTablesToDbUpdate.cs
	namespace 	
Revision_Part_1
 
. 
Infrastructure (
.( )

Migrations) 3
{ 
public 

partial 
class 
AddTablesToDbUpdate ,
:- .
	Migration/ 8
{		 
	protected 
override 
void 
Up  "
(" #
MigrationBuilder# 3
migrationBuilder4 D
)D E
{ 	
migrationBuilder 
. 
	AddColumn &
<& '
string' -
>- .
(. /
name 
: 
$str %
,% &
table 
: 
$str $
,$ %
type 
: 
$str %
,% &
nullable 
: 
true 
, 
defaultValue 
: 
$str !
)! "
;" #
migrationBuilder 
. 
AlterColumn (
<( )
decimal) 0
>0 1
(1 2
name 
: 
$str 
, 
table 
: 
$str 
,  
type 
: 
$str %
,% &
	precision 
: 
$num 
, 
scale 
: 
$num 
, 
nullable 
: 
false 
,  

oldClrType 
: 
typeof "
(" #
decimal# *
)* +
,+ ,
oldType 
: 
$str (
)( )
;) *
} 	
	protected   
override   
void   
Down    $
(  $ %
MigrationBuilder  % 5
migrationBuilder  6 F
)  F G
{!! 	
migrationBuilder"" 
."" 

DropColumn"" '
(""' (
name## 
:## 
$str## %
,##% &
table$$ 
:$$ 
$str$$ $
)$$$ %
;$$% &
migrationBuilder&& 
.&& 
AlterColumn&& (
<&&( )
decimal&&) 0
>&&0 1
(&&1 2
name'' 
:'' 
$str'' 
,'' 
table(( 
:(( 
$str(( 
,((  
type)) 
:)) 
$str)) %
,))% &
nullable** 
:** 
false** 
,**  

oldClrType++ 
:++ 
typeof++ "
(++" #
decimal++# *
)++* +
,+++ ,
oldType,, 
:,, 
$str,, (
,,,( )
oldPrecision-- 
:-- 
$num--  
,--  !
oldScale.. 
:.. 
$num.. 
).. 
;.. 
}// 	
}00 
}11 °
ÖC:\Users\rahul\Desktop\API_Tasks\DotNetCore_8\Revision_Part_1_Github\src\Revision_Part_1.Infrastructure\Helper\BlobStorageSettings.cs
	namespace 	
Revision_Part_1
 
. 
Infrastructure (
.( )
Helper) /
;/ 0
public 
class 
BlobStorageSettings  
{ 
public 

string 
ConnectionStrings #
{$ %
get& )
;) *
set+ .
;. /
}0 1
=2 3
default4 ;
!; <
;< =
public 

string 
ContainerName 
{  !
get" %
;% &
set' *
;* +
}, -
=. /
default0 7
!7 8
;8 9
public 

string 

AccountKey 
{ 
get "
;" #
set$ '
;' (
}) *
=+ ,
default- 4
!4 5
;5 6
} ÿ?
íC:\Users\rahul\Desktop\API_Tasks\DotNetCore_8\Revision_Part_1_Github\src\Revision_Part_1.Infrastructure\Migrations\20251120134039_AddTablesToDb.cs
	namespace 	
Revision_Part_1
 
. 
Infrastructure (
.( )

Migrations) 3
{ 
public 

partial 
class 
AddTablesToDb &
:' (
	Migration) 2
{		 
	protected 
override 
void 
Up  "
(" #
MigrationBuilder# 3
migrationBuilder4 D
)D E
{ 	
migrationBuilder 
. 
CreateTable (
(( )
name 
: 
$str #
,# $
columns 
: 
table 
=> !
new" %
{ 
Id 
= 
table 
. 
Column %
<% &
int& )
>) *
(* +
type+ /
:/ 0
$str1 6
,6 7
nullable8 @
:@ A
falseB G
)G H
. 

Annotation #
(# $
$str$ 8
,8 9
$str: @
)@ A
,A B
Name 
= 
table  
.  !
Column! '
<' (
string( .
>. /
(/ 0
type0 4
:4 5
$str6 E
,E F
nullableG O
:O P
falseQ V
)V W
,W X
Description 
=  !
table" '
.' (
Column( .
<. /
string/ 5
>5 6
(6 7
type7 ;
:; <
$str= L
,L M
nullableN V
:V W
falseX ]
)] ^
,^ _
Category 
= 
table $
.$ %
Column% +
<+ ,
string, 2
>2 3
(3 4
type4 8
:8 9
$str: I
,I J
nullableK S
:S T
falseU Z
)Z [
,[ \
HasDelivery 
=  !
table" '
.' (
Column( .
<. /
bool/ 3
>3 4
(4 5
type5 9
:9 :
$str; @
,@ A
nullableB J
:J K
falseL Q
)Q R
,R S
ContactEmail  
=! "
table# (
.( )
Column) /
</ 0
string0 6
>6 7
(7 8
type8 <
:< =
$str> M
,M N
nullableO W
:W X
trueY ]
)] ^
,^ _
ContactNumber !
=" #
table$ )
.) *
Column* 0
<0 1
string1 7
>7 8
(8 9
type9 =
:= >
$str? N
,N O
nullableP X
:X Y
trueZ ^
)^ _
,_ `
Address_City  
=! "
table# (
.( )
Column) /
</ 0
string0 6
>6 7
(7 8
type8 <
:< =
$str> M
,M N
nullableO W
:W X
trueY ]
)] ^
,^ _
Address_Street "
=# $
table% *
.* +
Column+ 1
<1 2
string2 8
>8 9
(9 :
type: >
:> ?
$str@ O
,O P
nullableQ Y
:Y Z
true[ _
)_ `
,` a
Address_PostalCode &
=' (
table) .
.. /
Column/ 5
<5 6
string6 <
>< =
(= >
type> B
:B C
$strD S
,S T
nullableU ]
:] ^
true_ c
)c d
} 
, 
constraints 
: 
table "
=># %
{ 
table 
. 

PrimaryKey $
($ %
$str% 5
,5 6
x7 8
=>9 ;
x< =
.= >
Id> @
)@ A
;A B
}   
)   
;   
migrationBuilder"" 
."" 
CreateTable"" (
(""( )
name## 
:## 
$str## 
,## 
columns$$ 
:$$ 
table$$ 
=>$$ !
new$$" %
{%% 
Id&& 
=&& 
table&& 
.&& 
Column&& %
<&&% &
int&&& )
>&&) *
(&&* +
type&&+ /
:&&/ 0
$str&&1 6
,&&6 7
nullable&&8 @
:&&@ A
false&&B G
)&&G H
.'' 

Annotation'' #
(''# $
$str''$ 8
,''8 9
$str'': @
)''@ A
,''A B
Name(( 
=(( 
table((  
.((  !
Column((! '
<((' (
string((( .
>((. /
(((/ 0
type((0 4
:((4 5
$str((6 E
,((E F
nullable((G O
:((O P
false((Q V
)((V W
,((W X
Description)) 
=))  !
table))" '
.))' (
Column))( .
<)). /
string))/ 5
>))5 6
())6 7
type))7 ;
:)); <
$str))= L
,))L M
nullable))N V
:))V W
false))X ]
)))] ^
,))^ _
Price** 
=** 
table** !
.**! "
Column**" (
<**( )
decimal**) 0
>**0 1
(**1 2
type**2 6
:**6 7
$str**8 G
,**G H
nullable**I Q
:**Q R
false**S X
)**X Y
,**Y Z
RestaurantId++  
=++! "
table++# (
.++( )
Column++) /
<++/ 0
int++0 3
>++3 4
(++4 5
type++5 9
:++9 :
$str++; @
,++@ A
nullable++B J
:++J K
false++L Q
)++Q R
},, 
,,, 
constraints-- 
:-- 
table-- "
=>--# %
{.. 
table// 
.// 

PrimaryKey// $
(//$ %
$str//% 0
,//0 1
x//2 3
=>//4 6
x//7 8
.//8 9
Id//9 ;
)//; <
;//< =
table00 
.00 

ForeignKey00 $
(00$ %
name11 
:11 
$str11 B
,11B C
column22 
:22 
x22  !
=>22" $
x22% &
.22& '
RestaurantId22' 3
,223 4
principalTable33 &
:33& '
$str33( 5
,335 6
principalColumn44 '
:44' (
$str44) -
,44- .
onDelete55  
:55  !
ReferentialAction55" 3
.553 4
Cascade554 ;
)55; <
;55< =
}66 
)66 
;66 
migrationBuilder88 
.88 
CreateIndex88 (
(88( )
name99 
:99 
$str99 .
,99. /
table:: 
::: 
$str:: 
,::  
column;; 
:;; 
$str;; &
);;& '
;;;' (
}<< 	
	protected?? 
override?? 
void?? 
Down??  $
(??$ %
MigrationBuilder??% 5
migrationBuilder??6 F
)??F G
{@@ 	
migrationBuilderAA 
.AA 
	DropTableAA &
(AA& '
nameBB 
:BB 
$strBB 
)BB 
;BB  
migrationBuilderDD 
.DD 
	DropTableDD &
(DD& '
nameEE 
:EE 
$strEE #
)EE# $
;EE$ %
}FF 	
}GG 
}HH π'
êC:\Users\rahul\Desktop\API_Tasks\DotNetCore_8\Revision_Part_1_Github\src\Revision_Part_1.Infrastructure\Extensions\ServiceCollectionExtension.cs
	namespace 	
Revision_Part_1
 
. 
Infrastructure (
.( )

Extensions) 3
;3 4
public 
static 
class &
ServiceCollectionExtension .
{ 
public 

static 
void 
AddInfrastructure (
(( )
this) -
IServiceCollection. @
servicesA I
,I J
IConfigurationK Y
configurationZ g
)g h
{ 
services 
. 
AddDbContext 
<  
RestaurentsDbContext 2
>2 3
(3 4
options4 ;
=>< >
options? F
.F G
UseSqlServerG S
(S T
configurationT a
.a b
GetConnectionStringb u
(u v
$str	v Ö
)
Ö Ü
)
Ü á
.
á à(
EnableSensitiveDataLogging
à ¢
(
¢ £
)
£ §
)
§ •
;
• ¶
services 
. 
	AddScoped 
< 
IRestaurantSeeder ,
,, -
RestaurantSeeder. >
>> ?
(? @
)@ A
;A B
services 
. 
	AddScoped 
< 
IRestaurantService -
,- .'
RestaurantServiceRepository/ J
>J K
(K L
)L M
;M N
services 
. 
	AddScoped 
< 
IDishService '
,' (!
DishServiceRepository) >
>> ?
(? @
)@ A
;A B
services 
. #
AddIdentityApiEndpoints (
<( )
User) -
>- .
(. /
)/ 0
.0 1
AddRoles1 9
<9 :
IdentityRole: F
>F G
(G H
)H I
.I J%
AddClaimsPrincipalFactoryJ c
<c d2
%RestaurantsUserClaimsPrincipalFactory	d â
>
â ä
(
ä ã
)
ã å
.
å ç&
AddEntityFrameworkStores
ç •
<
• ¶"
RestaurentsDbContext
¶ ∫
>
∫ ª
(
ª º
)
º Ω
;
Ω æ
services 
. #
AddAuthorizationBuilder (
(( )
)) *
.   
	AddPolicy   
(   
PolicyNames   "
.  " #
HasNationality  # 1
,  1 2
builder  3 :
=>  ; =
builder  > E
.  E F
RequireClaim  F R
(  R S
AppClaimTypes  S `
.  ` a
Nationality  a l
,  l m
$str  n v
,  v w
$str	  x Ä
)
  Ä Å
)
  Å Ç
.!! 
	AddPolicy!! 
(!! 
PolicyNames!! "
.!!" #
	Atleast20!!# ,
,!!, -
builder!!. 5
=>!!6 8
builder!!9 @
.!!@ A
AddRequirements!!A P
(!!P Q
new!!Q T!
MinimumAgeRequirement!!U j
(!!j k
$num!!k m
)!!m n
)!!n o
)!!o p
."" 
	AddPolicy"" 
("" 
PolicyNames"" "
.""" #&
CreatedAtleast2Restaurants""# =
,""= >
builder""? F
=>""G I
builder""J Q
.""Q R
AddRequirements""R a
(""a b
new""b e2
%CreatedMultipleRestaurantsRequirement	""f ã
(
""ã å
$num
""å ç
)
""ç é
)
""é è
)
""è ê
;
""ê ë
services$$ 
.$$ 
	AddScoped$$ 
<$$ !
IAuthorizationHandler$$ 0
,$$0 1(
MinimumAgeRequirementHandler$$2 N
>$$N O
($$O P
)$$P Q
;$$Q R
services%% 
.%% 
	AddScoped%% 
<%% !
IAuthorizationHandler%% 0
,%%0 18
,CreatedMultipleRestaurantsRequirementHandler%%2 ^
>%%^ _
(%%_ `
)%%` a
;%%a b
services'' 
.'' 
	AddScoped'' 
<'' +
IRestaurantAuthorizationService'' :
,'': ;*
RestaurantAuthorizationService''< Z
>''Z [
(''[ \
)''\ ]
;''] ^
services** 
.** 
	Configure** 
<** 
BlobStorageSettings** .
>**. /
(**/ 0
configuration**0 =
.**= >

GetSection**> H
(**H I
$str**I V
)**V W
)**W X
;**X Y
services++ 
.++ 
	AddScoped++ 
<++ 
IBlobStorageService++ .
,++. /
BlobStorageService++0 B
>++B C
(++C D
)++D E
;++E F
},, 
}-- Û
ÜC:\Users\rahul\Desktop\API_Tasks\DotNetCore_8\Revision_Part_1_Github\src\Revision_Part_1.Infrastructure\Constants\ResourceOperation.cs
	namespace 	
Revision_Part_1
 
. 
Infrastructure (
.( )
	Constants) 2
;2 3
public 
enum 
ResourceOperation 
{ 
Create 

,
 
Read 
, 	
Update		 

,		
 
Delete

 

} ì	
ÄC:\Users\rahul\Desktop\API_Tasks\DotNetCore_8\Revision_Part_1_Github\src\Revision_Part_1.Infrastructure\Constants\PolicyNames.cs
	namespace 	
Revision_Part_1
 
. 
Infrastructure (
.( )
	Constants) 2
;2 3
public 
static 
class 
PolicyNames 
{ 
public 

const 
string 
HasNationality &
=' (
$str) 9
;9 :
public 

const 
string 
	Atleast20 !
=" #
$str$ /
;/ 0
public 

const 
string &
CreatedAtleast2Restaurants 2
=3 4
$str5 Q
;Q R
} 
public

 
static

 
class

 
AppClaimTypes

 !
{ 
public 

const 
string 
Nationality #
=$ %
$str& 3
;3 4
public 

const 
string 
DateOfBirth #
=$ %
$str& 3
;3 4
} ˆ
ûC:\Users\rahul\Desktop\API_Tasks\DotNetCore_8\Revision_Part_1_Github\src\Revision_Part_1.Infrastructure\Authorization\RestaurantsUserClaimsPrincipalFactory.cs
	namespace 	
Revision_Part_1
 
. 
Infrastructure (
.( )
Authorization) 6
;6 7
public		 
class		 1
%RestaurantsUserClaimsPrincipalFactory		 2
(		2 3
UserManager		3 >
<		> ?
User		? C
>		C D
userManager		E P
,		P Q
RoleManager

 
<

 
IdentityRole

  
>

  !
roleManager

" -
,

- .
IOptions 
< 
IdentityOptions  
>  !
options" )
)) *
: &
UserClaimsPrincipalFactory (
<( )
User) -
,- .
IdentityRole/ ;
>; <
(< =
userManager= H
,H I
roleManagerJ U
,U V
optionsW ^
)^ _
{ 
public 

override 
async 
Task 
< 
ClaimsPrincipal .
>. /
CreateAsync0 ;
(; <
User< @
userA E
)E F
{ 
var 
id 
= 
await 
GenerateClaimsAsync *
(* +
user+ /
)/ 0
;0 1
if 

( 
user 
. 
Nationality 
!= 
null  $
)$ %
{ 	
id 
. 
AddClaim 
( 
new 
Claim !
(! "
AppClaimTypes" /
./ 0
Nationality0 ;
,; <
user= A
.A B
NationalityB M
)M N
)N O
;O P
} 	
if 

( 
user 
. 
DateOfBirth 
!= 
null  $
)$ %
{ 	
id 
. 
AddClaim 
( 
new 
Claim !
(! "
AppClaimTypes" /
./ 0
DateOfBirth0 ;
,; <
user= A
.A B
DateOfBirthB M
.M N
ValueN S
.S T
ToStringT \
(\ ]
$str] i
)i j
)j k
)k l
;l m
} 	
return 
new 
ClaimsPrincipal "
(" #
id# %
)% &
;& '
} 
} õ
ïC:\Users\rahul\Desktop\API_Tasks\DotNetCore_8\Revision_Part_1_Github\src\Revision_Part_1.Infrastructure\Authorization\MinimumAgeRequirementHandler.cs
	namespace 	
Revision_Part_1
 
. 
Infrastructure (
.( )
Authorization) 6
;6 7
public 
class (
MinimumAgeRequirementHandler )
() *
ILogger* 1
<1 2(
MinimumAgeRequirementHandler2 N
>N O
loggerP V
,V W
IUserContextX d
userContexte p
)p q
:r s!
AuthorizationHandler	t à
<
à â#
MinimumAgeRequirement
â û
>
û ü
{ 
	protected		 
override		 
Task		 "
HandleRequirementAsync		 2
(		2 3'
AuthorizationHandlerContext		3 N
context		O V
,		V W!
MinimumAgeRequirement		X m
requirement		n y
)		y z
{

 
var 
currentUser 
= 
userContext %
.% &

GetCurrent& 0
(0 1
)1 2
;2 3
var 
dob 
= 
context 
. 
User 
. 
Claims %
.% &
FirstOrDefault& 4
(4 5
c5 6
=>7 9
c: ;
.; <
Type< @
==A C
$strD Q
)Q R
?R S
.S T
ValueT Y
;Y Z
logger 
. 
LogInformation 
( 
$str a
,a b
currentUserc n
?n o
.o p
Emailp u
,u v
currentUser	w Ç
?
Ç É
.
É Ñ
DateOfBirth
Ñ è
)
è ê
;
ê ë
if 

(
 
currentUser 
? 
. 
DateOfBirth #
==$ &
null' +
)+ ,
{ 	
logger 
. 
LogInformation !
(! "
$str" A
)A B
;B C
context 
. 
Fail 
( 
) 
; 
return 
Task 
. 
CompletedTask %
;% &
} 	
if 

(
 
currentUser 
. 
DateOfBirth "
." #
Value# (
.( )
AddYears) 1
(1 2
requirement2 =
.= >

MinimumAge> H
)H I
<=J L
DateOnlyM U
.U V
FromDateTimeV b
(b c
DateTimec k
.k l
Todayl q
)q r
)r s
{ 	
logger 
. 
LogInformation !
(! "
$str" @
)@ A
;A B
context 
. 
Succeed 
( 
requirement '
)' (
;( )
} 	
else 
{ 	
context 
. 
Fail 
( 
) 
; 
} 	
context   
.   
Fail   
(   
)   
;   
return!! 
Task!! 
.!! 
CompletedTask!! !
;!!! "
}"" 
}## ∑
éC:\Users\rahul\Desktop\API_Tasks\DotNetCore_8\Revision_Part_1_Github\src\Revision_Part_1.Infrastructure\Authorization\MinimumAgeRequirement.cs
	namespace 	
Revision_Part_1
 
. 
Infrastructure (
.( )
Authorization) 6
;6 7
public 
class !
MinimumAgeRequirement "
(" #
int# &

minimumAge' 1
)1 2
:3 4%
IAuthorizationRequirement5 N
{ 
public 

int 

MinimumAge 
{ 
get 
;  
}! "
=# $

minimumAge% /
;/ 0
} ê
•C:\Users\rahul\Desktop\API_Tasks\DotNetCore_8\Revision_Part_1_Github\src\Revision_Part_1.Infrastructure\Authorization\CreatedMultipleRestaurantsRequirementHandler.cs
	namespace 	
Revision_Part_1
 
. 
Infrastructure (
.( )
Authorization) 6
;6 7
public 
class 8
,CreatedMultipleRestaurantsRequirementHandler 9
(9 :
IRestaurantService: L
_restaurantServiceM _
,_ `
IUserContexta m
_userContextn z
)z {
:| }!
AuthorizationHandler	~ í
<
í ì3
%CreatedMultipleRestaurantsRequirement
ì ∏
>
∏ π
{ 
	protected		 
override		 
async		 
Task		 !"
HandleRequirementAsync		" 8
(		8 9'
AuthorizationHandlerContext		9 T
context		U \
,		\ ]2
%CreatedMultipleRestaurantsRequirement			^ É
requirement
		Ñ è
)
		è ê
{

 
var 
currentUser 
= 
_userContext &
.& '

GetCurrent' 1
(1 2
)2 3
;3 4
var 
restaurants 
= 
await 
_restaurantService  2
.2 3
GetAllAsync3 >
(> ?
)? @
;@ A
var !
userRestaurantCreated !
=" #
restaurants$ /
./ 0
Count0 5
(5 6
r6 7
=>8 :
r; <
.< =
OwnerId= D
==E G
currentUserH S
!S T
.T U
IdU W
)W X
;X Y
if 

( !
userRestaurantCreated !
>=" $
requirement% 0
.0 1$
MinimumRestaurantCreated1 I
)I J
context 
. 
Succeed 
( 
requirement '
)' (
;( )
else 
context 
. 
Fail 
( 
) 
; 
} 
} Å
ûC:\Users\rahul\Desktop\API_Tasks\DotNetCore_8\Revision_Part_1_Github\src\Revision_Part_1.Infrastructure\Authorization\CreatedMultipleRestaurantsRequirement.cs
	namespace 	
Revision_Part_1
 
. 
Infrastructure (
.( )
Authorization) 6
;6 7
public 
class 1
%CreatedMultipleRestaurantsRequirement 2
(2 3
int3 6$
minimumRestaurantCreated7 O
)O P
:Q R%
IAuthorizationRequirementS l
{ 
public 

int $
MinimumRestaurantCreated '
{( )
get* -
;- .
}/ 0
=1 2$
minimumRestaurantCreated3 K
;K L
} Ü
sC:\Users\rahul\Desktop\API_Tasks\DotNetCore_8\Revision_Part_1_Github\src\Revision_Part_1.Infrastructure\assembly.cs
[ 
assembly 	
:	 

InternalsVisibleTo 
( 
$str *
)* +
]+ ,